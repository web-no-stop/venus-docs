(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{450:function(s,t,a){"use strict";a.r(t);var e=a(17),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"如何启动测试网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何启动测试网络"}},[s._v("#")]),s._v(" 如何启动测试网络")]),s._v(" "),a("blockquote",[a("p",[s._v("本文以建立2k网络为例,在 CentOS 7.* 系统部署venus集群.")])]),s._v(" "),a("h2",{attrs:{id:"必要系统环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#必要系统环境"}},[s._v("#")]),s._v(" 必要系统环境")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release -y\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ocl-icd-devel -y\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" opencl-headers -y\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" hwloc\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" jq -y \n")])])]),a("p",[s._v("在此过程中，系统会提示您安装所有组件。")]),s._v(" "),a("h2",{attrs:{id:"创世节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创世节点"}},[s._v("#")]),s._v(" 创世节点")]),s._v(" "),a("h3",{attrs:{id:"生成预密封文件和数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成预密封文件和数据"}},[s._v("#")]),s._v(" 生成预密封文件和数据")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./venus seed pre-seal --sector-size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" --num-sectors "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n./venus seed genesis new localnet.json\n./venus seed genesis add-miner localnet.json ~/.genesis-sectors/pre-seal-t01000.json\n")])])]),a("h3",{attrs:{id:"venus-auth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-auth"}},[s._v("#")]),s._v(" venus-auth")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-auth run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" auth.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成服务组件间相互访问API所需的验证token")]),s._v("\n./venus-auth token gen --perm admin admin\n")])])]),a("h3",{attrs:{id:"venus-gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-gateway"}},[s._v("#")]),s._v(" venus-gateway")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-gateway --listen"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ip4/0.0.0.0/tcp/45132 run --auth-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auth_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":8989 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" gateway.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("h3",{attrs:{id:"venus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus"}},[s._v("#")]),s._v(" venus")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus daemon --make-genesis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("devgen.car --genesis-template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localnet.json --network"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k --auth-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auth_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":8989 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" venus.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("h3",{attrs:{id:"venus-wallet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-wallet"}},[s._v("#")]),s._v(" venus-wallet")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务组件venus-auth需要为每个集群的venus-wallet生成具有wallet权限的token，用于向venus-gateway注册服务时验证请求合法性")]),s._v("\n$ ./venus-auth token gen --perm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" w1\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-wallet run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" wallet.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n$ ./venus-wallet setpwd\nPassword:******\nEnter Password again:******\n\n$ ./venus wallet "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" ~/.genesis-sectors/pre-seal-t01000.key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# venus-wallet 需要向 venus-gateway注册服务，故需要配置venus-gateway的监听和验证")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("APIRegisterHub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nRegisterAPI "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/ip4/<gateway_ip>/tcp/45132"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nToken "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<w1 token>"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 矿工集群的别名，在venus-auth中注册")]),s._v("\nSupportAccounts "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"m1"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"m2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h3",{attrs:{id:"venus-messager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-messager"}},[s._v("#")]),s._v(" venus-messager")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-messager run --auth-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auth_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":8989 --node-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("fullnode_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/3453 --gateway-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("gateway_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/3453 --auth-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("admin token"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --db-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sqilte "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" msg.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("h3",{attrs:{id:"初始化矿工"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化矿工"}},[s._v("#")]),s._v(" 初始化矿工")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务组件venus-auth需要为venus-sealer生成标识信息，比如：具有write权限的token，集群别明等，这些作为独立组件访问服务的必要信息，需要在请求API中带入：")]),s._v("\n./venus-auth user "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("m1 --miner"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t01000\n./venus-auth token gen --perm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" m1\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化 sealer")]),s._v("\n./venus-sealer init --genesis-miner --actor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t01000 --sector-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" --pre-sealed-sectors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~/.genesis-sectors --pre-sealed-metadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~/.genesis-sectors/pre-seal-t01000.json --nosync --network"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--node-url /ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("fullnode_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/3453 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--messager-url /ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("messager_ip/tcp/39812 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--gateway-url /ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("IP"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v("/gateway_ip/45132 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--auth-token "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("m1 token"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-sealer run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sealer.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("h3",{attrs:{id:"启动出块服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动出块服务"}},[s._v("#")]),s._v(" 启动出块服务")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./venus-miner init --nettype"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k ---auth-api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auth_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/3453 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --gateway-api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("gateway_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/45132\n --api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("fullnode_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/3453 --token "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("token "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" admin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-miner run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" miner.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每次启动时会从venus-auth请求当前已加入venus分布式矿池中的miner列表,可以根据命令查询:")]),s._v("\n./venus-miner address state \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Addr"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<MINER_ID>"')]),s._v(",\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IsMining"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h2",{attrs:{id:"普通矿工"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#普通矿工"}},[s._v("#")]),s._v(" 普通矿工")]),s._v(" "),a("h3",{attrs:{id:"启动sealer服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动sealer服务"}},[s._v("#")]),s._v(" 启动sealer服务")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 矿建一个钱包")]),s._v("\n$ ./venus-wallet new bls\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bls address "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转账，在创世节点执行")]),s._v("\n./venus send "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bls address "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" --value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询")]),s._v("\n./venus wallet balance "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bls address "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务组件venus-auth需要为venus-sealer生成标识信息，比如：具有write权限的token，集群别明等，这些作为独立组件访问服务的必要信息，需要在请求API中带入：")]),s._v("\n./venus-auth user "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("m2\n./venus-auth token gen --perm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" m2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成普通矿工")]),s._v("\n./venus-sealer init --worker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bls address "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" --owner"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bls address "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" --sector-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k --network"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--node-url /ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("fullnode_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/tcp/3453 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--messager-url /ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("messager_ip/tcp/39812 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--gateway-url /ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("IP"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v("/gateway_ip/45132 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--auth-token "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("m2 token"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新venus-auth中的User信息")]),s._v("\n./venus-auth user update --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("m2 --miner"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("t0***"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --state"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-sealer run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sealer.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行sector封装，这个命令只支持单次")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以通过crontab 做定时任务，也可以自行编写策略脚本执行")]),s._v("\n./venus-sealer sectors pledge \n")])])]),a("h3",{attrs:{id:"启动挖矿服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动挖矿服务"}},[s._v("#")]),s._v(" 启动挖矿服务")]),s._v(" "),a("p",[s._v("   在venus-miner中执行命令:")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./venus-miner address update\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看状态为true即表示正常出块:")]),s._v("\n./venus-miner address state \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Addr"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<MINER_ID>"')]),s._v(",\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IsMining"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);